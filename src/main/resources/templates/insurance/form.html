<!DOCTYPE html>
<html
        lang="en"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{generic/main}"
>
<head>
    <meta charset="UTF-8">
    <title>Add Insurance</title>
</head>
<body>
<div th:fragment="insurance_form">
    <div class="modal fade" id="formModal" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form method="post" th:action='@{/insurance/form}' th:object="${insurance}" class="row col-12 justify-content-center">
                    <div class="modal-header">
                        <h5 class="modal-title" id="formModalLabel" th:text="@{${insurance.id != null ? 'Update Insurance' : 'Create Insurance' }}">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <div>
                            <label for="numberPlate" class="form-label col-12 fw-bold my-auto">Number Plate</label>
                            <input id="numberPlate" name="numberPlate" type="text" class="form-control" th:field="*{numberPlate}"/>
                        </div>
                        <div>
                            <br>
                            <label for="carYear" class="form-label col-12 fw-bold my-auto">Year</label>
                            <input id="carYear" name="carYear" type="number" min="1990" max="2023" step="1" value="1990" class="form-control"/>
                            <br>
                        </div>
                        <div>
                            <label for="brand_model" class="form-label col-12 fw-bold my-auto">Brand-Model</label>
                            <select id="brand_model" name="brand_model" class="form-select d-inline">
                                <option th:each="vehicle : ${vehicles}" th:value="${vehicle.id}" th:text="${vehicle.brand} + ' ' + ${vehicle.model}"></option>
                            </select>
                        </div>
                        <div>
                            <label for="valuation" class="form-label col-12 fw-bold my-auto">Value</label>
                            <input id="valuation" name="valuation" type="text" class="form-control" th:field="*{valuation}"/>
                        </div>
                        <div>
                            <label for="paymentMethod" class="form-label col-12 fw-bold my-auto">Payment Method</label>
                            <select id="paymentMethod" name="paymentMethod" class="form-select d-inline">
                                <option th:each="paymentSchedule : ${paymentSchedules}" th:value="${paymentSchedule.id}" th:text="${paymentSchedule.name}"></option>
                            </select>

                        </div>
                        <div class="row col-12 justify-content-center">
                            <div class="col-12" th:if="${param.error != null}">
                                <p class="text-center">Invalid credentials, please try again.</p>
                            </div>
                        </div>
                        <hr>
                        <div>
                            <label for="cards" class="form-label col-12 fw-bold my-auto">Cards</label>
                            <select id="cards" name="cards" class="form-select d-inline">
                                <option th:each="payment : ${payments}" th:value="${payment.id}" th:text="${payment.number} + ' ' + ${payment.owner}"></option>
                            </select>

                        </div>



                        <div th:each="coverage : ${coverages}"  >
                            <input class="form-check-input" type="checkbox" th:value="${coverage.id}"  id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault" th:text="${coverage.name} + ' ' + ${coverage.description}"> </label>
                        </div>

                        <div class="row col-12 justify-content-center">
                            <input type="submit" class="btn btn-lg col-4 btn-primary fw-bold mb-2" value="Save Insurance">
                            <div class="col-12 text-center"> <a th:href="@{/insurance}" class="link-secondary"> view all insurance!</a></div>
                        </div>

                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>